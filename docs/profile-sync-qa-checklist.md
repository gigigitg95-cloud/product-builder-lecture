# Profile Sync QA Checklist

목적: Supabase 프로필(목표/알레르기/기피/선호)이 추천/슬롯/무료 7일 식단/프리미엄 입력폼에 자동 반영되는지 점검합니다.

## 1) 게스트 기준(localStorage)

1. 브라우저에서 로그아웃 상태 확인
2. `report-intake` 진입 후 목표/알레르기/기피/선호 입력
3. 결제 이동 전 단계에서 상태 문구 확인
- `게스트 저장값(localStorage) 기본값을 반영했습니다.`
4. 메인/무료 7일 식단으로 이동 후 새로고침
5. 자동 반영 확인
- 추천/슬롯 필터가 빈 상태가 아니고 재추천 시 동일 성향으로 좁혀지는지
- 무료 7일 식단의 목표/알레르기 기본값 반영 여부

## 2) 로그인 기준(서버 + 캐시)

1. 로그인 후 `mypage`에서 목표/알레르기/기피/선호 저장
2. `report-intake` 진입 후 상태 문구 확인
- `로그인 프로필(서버+캐시) 기본값을 반영했습니다.`
3. 필드 자동 반영 확인
- `목표/알레르기/기피/선호`가 마이페이지 값과 일치
4. 무료 7일 식단 진입 후 자동 반영 확인
- 목표 매핑(감량->diet, 증량->gain, 기타->maintain)
- 알레르기 텍스트 자동 반영
5. 메인 추천/슬롯에서 필터 반영 확인
- 선호 카테고리 기반 추천 풀 우선 반영
- 알레르기/기피 키워드 메뉴가 과도하게 노출되지 않는지

## 3) 로그인/로그아웃 전환 안정성

1. 로그인 상태에서 값 확인 후 로그아웃
2. 같은 페이지 새로고침
3. 게스트 값으로 전환되는지 확인
4. 다시 로그인 후 새로고침
5. 서버/캐시 값으로 복원되는지 확인

## 4) 페이지 이동/새로고침 유지성

1. `index -> report-intake -> light-meal-plan -> index` 순서로 이동
2. 각 페이지마다 기본값/필터가 유지되는지 확인
3. 브라우저 새로고침 후 동일 상태 유지 확인

## 5) 실패/예외 케이스

1. Supabase 연결 실패(로컬 API 미기동 등) 상황
- 로그인 사용자는 user cache fallback으로 최소 기본값 유지 확인
2. localStorage 초기화 후 재접속
- 게스트는 초기 상태(빈값)로 안전 복귀
3. 비정상 문자열 입력(긴 문자열/구분자 다수)
- 필드 정규화(trim/slice/split) 후 UI/기능 오류 없는지 확인
