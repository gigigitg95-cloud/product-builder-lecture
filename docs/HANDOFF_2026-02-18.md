# Handoff - 2026-02-18

이 문서는 2026-02-18 작업 종료 시점 기준 핸드오프 기록입니다.
내일 작업 재개 시 본 파일을 우선 참고하세요.

## 1) 오늘 구현한 핵심 변경

### A. SEO/i18n 강화 (FAQ + 랜딩 카피)
- FAQ 페이지를 카테고리형(추천 정확도/알레르기·건강/공유·저장/프리미엄 리포트/로그인·데이터)으로 개편
- FAQ 항목 20개 이상을 i18n 키 기반으로 렌더링
- 홈 How it works 카피 정렬 및 데이터/프라이버시 요약 박스 추가
- ko/en 실번역 추가, 기타 언어는 TODO 키 자동 주입

관련 파일:
- `pages/faq.html`
- `js/faq-page.js` (new)
- `js/translations.js`
- `index.html`

### B. 추천 결과 강화
- 추천 결과에 `추천 이유(3줄)` 추가
- `대체 옵션 3개` 버튼 추가 (동일 카테고리 우선 + 인접 카테고리 혼합)
- 최근 추천 10개 localStorage 저장 및 중복 회피
- Pexels 최근 이미지 ID도 localStorage 복원/회피로 일관화
- 분석 이벤트 훅 준비 (`recommend_click`, `alternative_option_click`, `share_click`)

관련 파일:
- `index.html`
- `js/app.js`

### C. 무료 라이트 업셀 퍼널 추가
- 사이드바(데스크톱/모바일)에 `무료 7일 식단(라이트)` 진입점 추가
- OpenAI 호출 없이 로컬 데이터 기반 7일 식단 + 장보기 리스트 생성 페이지 추가
- 결과 하단에 프리미엄 CTA 명확 노출

관련 파일:
- `pages/light-meal-plan.html` (new)
- `js/light-meal-plan.js` (new)
- `index.html`
- `js/app.js` (사이드바 라벨 번역 확장)

### D. report-intake 전문가형 UX 개편
- Step 1~4 단계형 폼으로 전환:
  - Step 1: 목표/기간
  - Step 2: 신체/활동
  - Step 3: 식이제한/알레르기
  - Step 4: 선호/예산/조리환경
- 각 단계에 “왜 필요한지” 설명 추가
- 입력 부족 시 추가 질문 자동 노출 (활동량 미입력 시 운동횟수/걸음수)
- 권장 입력 점수(품질 점수) 표시
- 폼 하단 저장/전송 범위 고지 + 개인정보처리방침 링크

관련 파일:
- `pages/report-intake.html`
- `js/premium-report-intake.js` (rewritten)

### E. Polar metadata 매핑 확장 + 문서화
- 기존 metadata 키 유지 + 신규 스텝 필드 키 추가
- 빈 값 metadata 제거 동작 유지(하위 호환)
- 결제 페이지 요약/즉시 미리보기에도 신규 필드 반영
- metadata 매핑 표 문서 추가

관련 파일:
- `js/polar-worker-checkout.js`
- `pages/payment.html` (스크립트 캐시버전 갱신)
- `docs/PREMIUM_REPORT_METADATA_MAPPING.md` (new)

---

## 2) 오늘 생성/수정된 주요 파일 목록

### 새 파일
- `js/faq-page.js`
- `pages/light-meal-plan.html`
- `js/light-meal-plan.js`
- `docs/PREMIUM_REPORT_METADATA_MAPPING.md`
- `docs/HANDOFF_2026-02-18.md` (this file)

### 수정 파일 (핵심)
- `index.html`
- `js/app.js`
- `js/translations.js`
- `pages/faq.html`
- `pages/report-intake.html`
- `js/premium-report-intake.js`
- `js/polar-worker-checkout.js`
- `pages/payment.html`

---

## 3) 절대 깨지면 안 되는 기존 플로우

- 프리미엄 플로우: `report-intake -> payment -> report-result`
- 기존 인증/회원 기능
- 기존 추천/슬롯 기능 기본 UX

---

## 4) 내일 시작 시 바로 할 일 (권장 순서)

1. `git status`로 워크트리 상태 확인
2. `docs/HANDOFF_2026-02-18.md` + `docs/PREMIUM_REPORT_METADATA_MAPPING.md` 먼저 확인
3. 아래 파일 빠른 점검:
   - `pages/report-intake.html`
   - `js/premium-report-intake.js`
   - `js/polar-worker-checkout.js`
4. 브라우저 수동 점검:
   - Step 폼 이동/검증/추가질문
   - payment 요약/metadata 반영
   - 무료 라이트 생성/업셀 CTA
   - FAQ 카테고리 렌더링
5. 문제 없으면 커밋/푸시

---

## 5) 재검증 명령 (빠른 체크)

```bash
node --check js/app.js
node --check js/faq-page.js
node --check js/light-meal-plan.js
node --check js/premium-report-intake.js
node --check js/polar-worker-checkout.js
```

---

## 6) 메모

- 현재 워크트리는 오늘 작업 외 변경도 함께 섞여 있을 수 있으므로, 커밋 전 `git diff`로 범위를 분리해서 확인할 것.
- `pages/payment.html`는 `polar-worker-checkout.js` 캐시버전을 `v=20260218a`로 갱신함.
